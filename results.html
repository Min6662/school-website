<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results Management - School Management System</title>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-graduation-cap"></i> School Portal</h3>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html" class="nav-item">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="students.html" class="nav-item">
                <i class="fas fa-user-graduate"></i>
                <span>Students</span>
            </a>
            <a href="teachers.html" class="nav-item">
                <i class="fas fa-chalkboard-teacher"></i>
                <span>Teachers</span>
            </a>
            <a href="classes.html" class="nav-item">
                <i class="fas fa-book-open"></i>
                <span>Classes</span>
            </a>
            <a href="results.html" class="nav-item active">
                <i class="fas fa-chart-bar"></i>
                <span>Results</span>
            </a>
            <a href="settings.html" class="nav-item">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </nav>
    </div>

    <div class="main-content">
        <header class="main-header">
            <h1>Results Management</h1>
            <div class="header-actions">
                <button class="btn btn-primary" onclick="showAddResultModal()">
                    <i class="fas fa-plus"></i> Add Result
                </button>
                <button class="btn btn-outline" onclick="generateReport()">
                    <i class="fas fa-file-pdf"></i> Generate Report
                </button>
            </div>
        </header>

        <div class="content-wrapper">
            <!-- Filters and Search -->
            <div class="results-filters">
                <div class="filter-group">
                    <label>Academic Year:</label>
                    <select id="year-filter">
                        <option value="2024-2025">2024-2025</option>
                        <option value="2023-2024">2023-2024</option>
                        <option value="2022-2023">2022-2023</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Semester:</label>
                    <select id="semester-filter">
                        <option value="">All Semesters</option>
                        <option value="1">Semester 1</option>
                        <option value="2">Semester 2</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Class:</label>
                    <select id="class-filter">
                        <option value="">All Classes</option>
                        <!-- Dynamic options will be loaded here -->
                    </select>
                </div>
                <div class="filter-group">
                    <label>Subject:</label>
                    <select id="subject-filter">
                        <option value="">All Subjects</option>
                        <option value="mathematics">Mathematics</option>
                        <option value="english">English</option>
                        <option value="science">Science</option>
                        <option value="history">History</option>
                        <option value="physics">Physics</option>
                        <option value="chemistry">Chemistry</option>
                    </select>
                </div>
                <div class="search-input-wrapper">
                    <i class="fas fa-search"></i>
                    <input type="text" id="student-search" placeholder="Search by student name..." class="search-input">
                </div>
            </div>

            <!-- Results Statistics -->
            <div class="results-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="total-results">0</h3>
                        <p>Total Results</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="average-score">0</h3>
                        <p>Average Score</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-medal"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="pass-rate">0%</h3>
                        <p>Pass Rate</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="top-performers">0</h3>
                        <p>Top Performers</p>
                    </div>
                </div>
            </div>

            <!-- Results Table -->
            <div class="data-table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Student ID</th>
                            <th>Class</th>
                            <th>Subject</th>
                            <th>Marks</th>
                            <th>Grade</th>
                            <th>Status</th>
                            <th>Semester</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="results-table-body">
                        <!-- Dynamic content will be loaded here -->
                    </tbody>
                </table>
            </div>

            <!-- Loading indicator -->
            <div id="loading-indicator" class="loading-indicator" style="display: none;">
                <div class="spinner"></div>
                <p>Loading results...</p>
            </div>

            <!-- Empty state -->
            <div id="empty-state" class="empty-state" style="display: none;">
                <i class="fas fa-chart-bar"></i>
                <h3>No Results Found</h3>
                <p>Start by adding exam results for your students.</p>
                <button class="btn btn-primary" onclick="showAddResultModal()">
                    <i class="fas fa-plus"></i> Add Result
                </button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Result Modal -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Add Result</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <form id="result-form" class="modal-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="result-student">Student *</label>
                        <select id="result-student" name="studentId" required>
                            <option value="">Select Student</option>
                            <!-- Dynamic options will be loaded here -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="result-subject">Subject *</label>
                        <select id="result-subject" name="subject" required>
                            <option value="">Select Subject</option>
                            <option value="mathematics">Mathematics</option>
                            <option value="english">English</option>
                            <option value="science">Science</option>
                            <option value="history">History</option>
                            <option value="physics">Physics</option>
                            <option value="chemistry">Chemistry</option>
                            <option value="biology">Biology</option>
                            <option value="geography">Geography</option>
                            <option value="computer-science">Computer Science</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="result-marks">Marks Obtained *</label>
                        <input type="number" id="result-marks" name="marks" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="result-total">Total Marks</label>
                        <input type="number" id="result-total" name="totalMarks" value="100" min="1">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="result-semester">Semester *</label>
                        <select id="result-semester" name="semester" required>
                            <option value="">Select Semester</option>
                            <option value="1">Semester 1</option>
                            <option value="2">Semester 2</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="result-year">Academic Year</label>
                        <select id="result-year" name="academicYear">
                            <option value="2024-2025">2024-2025</option>
                            <option value="2023-2024">2023-2024</option>
                            <option value="2022-2023">2022-2023</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="result-exam-type">Exam Type</label>
                        <select id="result-exam-type" name="examType">
                            <option value="final">Final Exam</option>
                            <option value="midterm">Midterm Exam</option>
                            <option value="quiz">Quiz</option>
                            <option value="assignment">Assignment</option>
                            <option value="project">Project</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="result-date">Exam Date</label>
                        <input type="date" id="result-date" name="examDate">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group full-width">
                        <label for="result-remarks">Remarks</label>
                        <textarea id="result-remarks" name="remarks" rows="3" placeholder="Additional comments or observations..."></textarea>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <span id="submit-text">Add Result</span>
                        <div id="submit-spinner" class="button-spinner" style="display: none;"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Student Results Modal -->
    <div id="student-results-modal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="student-results-title">Student Results</h2>
                <span class="close" onclick="closeStudentResultsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="student-results-content">
                    <!-- Dynamic content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container"></div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/api-service.js"></script>
    <script src="js/navigation.js"></script>
    
    <script>
        // Results Management System
        class ResultsManager {
            constructor(apiService) {
                this.apiService = apiService;
                this.results = [];
                this.students = [];
                this.classes = [];
                this.editingResultId = null;
                this.init();
            }

            async init() {
                await this.loadStudents();
                await this.loadClasses();
                await this.loadResults();
                this.setupEventListeners();
                this.updateStatistics();
            }

            async loadResults() {
                try {
                    this.showLoading(true);
                    this.results = await this.apiService.getResults();
                    this.renderResults();
                    this.showEmptyState(this.results.length === 0);
                } catch (error) {
                    console.error('Error loading results:', error);
                    // Use sample data for demonstration
                    this.loadSampleResults();
                }
                this.showLoading(false);
            }

            loadSampleResults() {
                this.results = [
                    {
                        objectId: '1',
                        studentId: 'student1',
                        subject: 'mathematics',
                        marks: 85,
                        totalMarks: 100,
                        grade: 'A',
                        status: 'Pass',
                        semester: '1',
                        academicYear: '2024-2025',
                        examType: 'final',
                        examDate: '2024-01-15'
                    },
                    {
                        objectId: '2',
                        studentId: 'student2',
                        subject: 'english',
                        marks: 92,
                        totalMarks: 100,
                        grade: 'A+',
                        status: 'Pass',
                        semester: '1',
                        academicYear: '2024-2025',
                        examType: 'final',
                        examDate: '2024-01-16'
                    },
                    {
                        objectId: '3',
                        studentId: 'student1',
                        subject: 'science',
                        marks: 78,
                        totalMarks: 100,
                        grade: 'B+',
                        status: 'Pass',
                        semester: '1',
                        academicYear: '2024-2025',
                        examType: 'final',
                        examDate: '2024-01-17'
                    }
                ];
                this.renderResults();
                this.showEmptyState(false);
            }

            async loadStudents() {
                try {
                    this.students = await this.apiService.getStudents();
                    this.populateStudentOptions();
                } catch (error) {
                    console.error('Error loading students:', error);
                    // Use sample data
                    this.students = [
                        { objectId: 'student1', name: 'John Smith', studentId: 'STU001', className: 'Class A' },
                        { objectId: 'student2', name: 'Emily Johnson', studentId: 'STU002', className: 'Class A' },
                        { objectId: 'student3', name: 'Michael Brown', studentId: 'STU003', className: 'Class B' }
                    ];
                    this.populateStudentOptions();
                }
            }

            async loadClasses() {
                try {
                    this.classes = await this.apiService.getClasses();
                    this.populateClassOptions();
                } catch (error) {
                    console.error('Error loading classes:', error);
                    this.classes = [
                        { objectId: 'class1', name: 'Class A' },
                        { objectId: 'class2', name: 'Class B' },
                        { objectId: 'class3', name: 'Class C' }
                    ];
                    this.populateClassOptions();
                }
            }

            renderResults() {
                const tbody = document.getElementById('results-table-body');
                if (!tbody) return;

                tbody.innerHTML = this.results.map(result => {
                    const student = this.getStudentById(result.studentId);
                    const studentName = student ? student.name : 'Unknown Student';
                    const studentId = student ? student.studentId : 'N/A';
                    const className = student ? student.className : 'N/A';

                    return `
                        <tr>
                            <td>${studentName}</td>
                            <td>${studentId}</td>
                            <td>${className}</td>
                            <td>${this.capitalizeFirst(result.subject)}</td>
                            <td>${result.marks}/${result.totalMarks || 100}</td>
                            <td><span class="grade-badge grade-${result.grade?.toLowerCase().replace('+', 'plus')}">${result.grade || this.calculateGrade(result.marks)}</span></td>
                            <td><span class="status-badge status-${result.status?.toLowerCase() || (result.marks >= 40 ? 'pass' : 'fail')}">${result.status || (result.marks >= 40 ? 'Pass' : 'Fail')}</span></td>
                            <td>Semester ${result.semester}</td>
                            <td class="action-buttons">
                                <button class="btn-icon" onclick="resultsManager.editResult('${result.objectId}')" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon" onclick="resultsManager.viewStudentResults('${result.studentId}')" title="View All Results">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-icon" onclick="resultsManager.deleteResult('${result.objectId}')" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                }).join('');
            }

            getStudentById(studentId) {
                return this.students.find(s => s.objectId === studentId);
            }

            calculateGrade(marks) {
                if (marks >= 90) return 'A+';
                if (marks >= 80) return 'A';
                if (marks >= 70) return 'B+';
                if (marks >= 60) return 'B';
                if (marks >= 50) return 'C+';
                if (marks >= 40) return 'C';
                return 'F';
            }

            capitalizeFirst(str) {
                return str.charAt(0).toUpperCase() + str.slice(1).replace('-', ' ');
            }

            populateStudentOptions() {
                const select = document.getElementById('result-student');
                if (!select) return;

                select.innerHTML = '<option value="">Select Student</option>';
                this.students.forEach(student => {
                    const option = document.createElement('option');
                    option.value = student.objectId;
                    option.textContent = `${student.name} (${student.studentId})`;
                    select.appendChild(option);
                });
            }

            populateClassOptions() {
                const select = document.getElementById('class-filter');
                if (!select) return;

                // Clear existing options except the first one
                select.innerHTML = '<option value="">All Classes</option>';
                this.classes.forEach(cls => {
                    const option = document.createElement('option');
                    option.value = cls.objectId;
                    option.textContent = cls.name;
                    select.appendChild(option);
                });
            }

            updateStatistics() {
                const totalResults = this.results.length;
                const totalMarks = this.results.reduce((sum, result) => sum + result.marks, 0);
                const averageScore = totalResults > 0 ? Math.round(totalMarks / totalResults) : 0;
                const passCount = this.results.filter(result => result.marks >= 40).length;
                const passRate = totalResults > 0 ? Math.round((passCount / totalResults) * 100) : 0;
                const topPerformers = this.results.filter(result => result.marks >= 80).length;

                document.getElementById('total-results').textContent = totalResults;
                document.getElementById('average-score').textContent = averageScore;
                document.getElementById('pass-rate').textContent = passRate + '%';
                document.getElementById('top-performers').textContent = topPerformers;
            }

            setupEventListeners() {
                // Form submission
                const form = document.getElementById('result-form');
                if (form) {
                    form.addEventListener('submit', (e) => this.handleFormSubmit(e));
                }

                // Auto-calculate grade when marks change
                const marksInput = document.getElementById('result-marks');
                if (marksInput) {
                    marksInput.addEventListener('input', (e) => {
                        // Could add real-time grade calculation display here
                    });
                }

                // Filter listeners
                ['year-filter', 'semester-filter', 'class-filter', 'subject-filter'].forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('change', () => this.applyFilters());
                    }
                });

                // Search listener
                const searchInput = document.getElementById('student-search');
                if (searchInput) {
                    searchInput.addEventListener('input', () => this.applyFilters());
                }
            }

            async handleFormSubmit(e) {
                e.preventDefault();
                
                const formData = new FormData(e.target);
                const resultData = Object.fromEntries(formData.entries());
                
                // Calculate grade and status
                resultData.grade = this.calculateGrade(parseInt(resultData.marks));
                resultData.status = parseInt(resultData.marks) >= 40 ? 'Pass' : 'Fail';
                
                try {
                    this.showSubmitSpinner(true);
                    
                    if (this.editingResultId) {
                        await this.apiService.updateResult(this.editingResultId, resultData);
                        this.showNotification('Result updated successfully!', 'success');
                    } else {
                        const newResult = await this.apiService.createResult(resultData);
                        this.showNotification('Result added successfully!', 'success');
                    }
                    
                    this.closeModal();
                    await this.loadResults();
                    this.updateStatistics();
                } catch (error) {
                    console.error('Error saving result:', error);
                    this.showNotification('Error saving result. Please try again.', 'error');
                } finally {
                    this.showSubmitSpinner(false);
                }
            }

            applyFilters() {
                const year = document.getElementById('year-filter').value;
                const semester = document.getElementById('semester-filter').value;
                const classId = document.getElementById('class-filter').value;
                const subject = document.getElementById('subject-filter').value;
                const search = document.getElementById('student-search').value.toLowerCase();

                let filteredResults = this.results.filter(result => {
                    const student = this.getStudentById(result.studentId);
                    const studentName = student ? student.name.toLowerCase() : '';
                    
                    return (!year || result.academicYear === year) &&
                           (!semester || result.semester === semester) &&
                           (!classId || student?.classId === classId) &&
                           (!subject || result.subject === subject) &&
                           (!search || studentName.includes(search));
                });

                // Temporarily render filtered results
                const originalResults = this.results;
                this.results = filteredResults;
                this.renderResults();
                this.results = originalResults;
                
                this.showEmptyState(filteredResults.length === 0);
            }

            async editResult(resultId) {
                const result = this.results.find(r => r.objectId === resultId);
                if (!result) return;

                this.editingResultId = resultId;
                this.showAddResultModal();
                
                // Populate form with result data
                document.getElementById('modal-title').textContent = 'Edit Result';
                document.getElementById('submit-text').textContent = 'Update Result';
                document.getElementById('result-student').value = result.studentId || '';
                document.getElementById('result-subject').value = result.subject || '';
                document.getElementById('result-marks').value = result.marks || '';
                document.getElementById('result-total').value = result.totalMarks || 100;
                document.getElementById('result-semester').value = result.semester || '';
                document.getElementById('result-year').value = result.academicYear || '2024-2025';
                document.getElementById('result-exam-type').value = result.examType || 'final';
                document.getElementById('result-date').value = result.examDate || '';
                document.getElementById('result-remarks').value = result.remarks || '';
            }

            async deleteResult(resultId) {
                if (!confirm('Are you sure you want to delete this result?')) return;
                
                try {
                    await this.apiService.deleteResult(resultId);
                    this.showNotification('Result deleted successfully!', 'success');
                    await this.loadResults();
                    this.updateStatistics();
                } catch (error) {
                    console.error('Error deleting result:', error);
                    this.showNotification('Error deleting result. Please try again.', 'error');
                }
            }

            viewStudentResults(studentId) {
                const student = this.getStudentById(studentId);
                if (!student) return;

                const studentResults = this.results.filter(r => r.studentId === studentId);
                
                document.getElementById('student-results-title').textContent = `${student.name} - Results`;
                
                const content = document.getElementById('student-results-content');
                content.innerHTML = `
                    <div class="student-results-summary">
                        <h3>Academic Performance Summary</h3>
                        <div class="summary-stats">
                            <div class="summary-stat">
                                <strong>Total Subjects:</strong> ${new Set(studentResults.map(r => r.subject)).size}
                            </div>
                            <div class="summary-stat">
                                <strong>Average Score:</strong> ${Math.round(studentResults.reduce((sum, r) => sum + r.marks, 0) / studentResults.length) || 0}%
                            </div>
                            <div class="summary-stat">
                                <strong>Pass Rate:</strong> ${Math.round((studentResults.filter(r => r.marks >= 40).length / studentResults.length) * 100) || 0}%
                            </div>
                        </div>
                    </div>
                    <div class="student-results-table">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Subject</th>
                                    <th>Marks</th>
                                    <th>Grade</th>
                                    <th>Status</th>
                                    <th>Semester</th>
                                    <th>Exam Type</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${studentResults.map(result => `
                                    <tr>
                                        <td>${this.capitalizeFirst(result.subject)}</td>
                                        <td>${result.marks}/${result.totalMarks || 100}</td>
                                        <td><span class="grade-badge grade-${(result.grade || this.calculateGrade(result.marks)).toLowerCase().replace('+', 'plus')}">${result.grade || this.calculateGrade(result.marks)}</span></td>
                                        <td><span class="status-badge status-${(result.status || (result.marks >= 40 ? 'pass' : 'fail')).toLowerCase()}">${result.status || (result.marks >= 40 ? 'Pass' : 'Fail')}</span></td>
                                        <td>Semester ${result.semester}</td>
                                        <td>${this.capitalizeFirst(result.examType || 'Final')}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
                
                document.getElementById('student-results-modal').style.display = 'block';
            }

            generateReport() {
                this.showNotification('Report generation feature coming soon!', 'info');
            }

            showAddResultModal() {
                this.editingResultId = null;
                document.getElementById('modal-title').textContent = 'Add Result';
                document.getElementById('submit-text').textContent = 'Add Result';
                document.getElementById('result-form').reset();
                document.getElementById('result-total').value = '100'; // Default total marks
                document.getElementById('result-year').value = '2024-2025'; // Default year
                document.getElementById('result-modal').style.display = 'block';
            }

            closeModal() {
                document.getElementById('result-modal').style.display = 'none';
                this.editingResultId = null;
            }

            closeStudentResultsModal() {
                document.getElementById('student-results-modal').style.display = 'none';
            }

            showLoading(show) {
                const loading = document.getElementById('loading-indicator');
                if (loading) {
                    loading.style.display = show ? 'flex' : 'none';
                }
            }

            showEmptyState(show) {
                const emptyState = document.getElementById('empty-state');
                if (emptyState) {
                    emptyState.style.display = show ? 'flex' : 'none';
                }
            }

            showSubmitSpinner(show) {
                const spinner = document.getElementById('submit-spinner');
                const text = document.getElementById('submit-text');
                if (spinner && text) {
                    spinner.style.display = show ? 'block' : 'none';
                    text.style.display = show ? 'none' : 'block';
                }
            }

            showNotification(message, type) {
                const container = document.getElementById('notification-container');
                if (!container) return;

                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                    <button class="notification-close" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                `;

                container.appendChild(notification);

                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 5000);
            }
        }

        // Global functions for modal management
        function showAddResultModal() {
            if (window.resultsManager) {
                window.resultsManager.showAddResultModal();
            }
        }

        function closeModal() {
            if (window.resultsManager) {
                window.resultsManager.closeModal();
            }
        }

        function closeStudentResultsModal() {
            if (window.resultsManager) {
                window.resultsManager.closeStudentResultsModal();
            }
        }

        function generateReport() {
            if (window.resultsManager) {
                window.resultsManager.generateReport();
            }
        }

        // Initialize results management when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            const navigation = new NavigationManager();
            
            if (typeof apiService !== 'undefined') {
                window.resultsManager = new ResultsManager(apiService);
            } else {
                console.error('API service not available');
            }

            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                const resultModal = document.getElementById('result-modal');
                const studentResultsModal = document.getElementById('student-results-modal');
                
                if (event.target === resultModal) {
                    closeModal();
                }
                if (event.target === studentResultsModal) {
                    closeStudentResultsModal();
                }
            });
        });
    </script>
</body>
</html>